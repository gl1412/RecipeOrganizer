var e=globalThis,t={},n={},r=e.parcelRequire94c2;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in n){var r=n[e];delete n[e];var o={id:e,exports:{}};return t[e]=o,r.call(o.exports,o,o.exports),o.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){n[e]=t},e.parcelRequire94c2=r),(0,r.register)("27Lyk",function(e,t){Object.defineProperty(e.exports,"register",{get:()=>n,set:e=>n=e,enumerable:!0,configurable:!0});var n,r=new Map;n=function(e,t){for(var n=0;n<t.length-1;n+=2)r.set(t[n],{baseUrl:e,path:t[n+1]})}}),r("27Lyk").register(new URL("",import.meta.url).toString(),JSON.parse('["5SCbD","index.443938a7.js","ivUfc","service-worker.b94753ee.js"]'));var o=r("6FvfU");function i(e){document.getElementById("login-btn").style.display=e?"none":"inline-block",document.getElementById("logout-btn").style.display=e?"inline-block":"none",document.getElementById("recipe-form").style.display=e?"block":"none",document.getElementById("recipe-list").style.display="block"}async function a(e,t,n){let r=JSON.parse(localStorage.getItem("email"));if(!r){alert("You must be logged in to add recipes!");return}try{await (0,o.addDoc)((0,o.collection)(o.db,"recipes"),{email:r,name:e,ingredients:t.split(",").map(e=>e.trim()),category:n}),console.log("Recipe added successfully!"),c()}catch(e){console.error("Error adding recipe:",e)}}async function c(){let e=JSON.parse(localStorage.getItem("email")),t=document.getElementById("recipes");if(t.innerHTML="",!e){t.innerHTML="<p>Please sign in to view your saved recipes.</p>";return}let n=(0,o.query)((0,o.collection)(o.db,"recipes"),(0,o.where)("email","==",e));(await (0,o.getDocs)(n)).forEach(e=>{let n=e.data(),r=e.id,o=document.createElement("li");o.innerHTML=`<strong>${n.name}</strong> - ${n.ingredients.join(", ")} (${n.category})`;let i=document.createElement("button");i.textContent="Edit",i.addEventListener("click",()=>s(r,n.name,n.ingredients.join(", "),n.category));let a=document.createElement("button");a.textContent="Delete",a.addEventListener("click",()=>l(r)),o.appendChild(i),o.appendChild(a),t.appendChild(o)})}async function l(e){if(confirm("Are you sure you want to delete this recipe?"))try{await (0,o.deleteDoc)((0,o.doc)(o.db,"recipes",e)),console.log("Recipe deleted successfully!"),c()}catch(e){console.error("Error deleting recipe:",e)}}async function s(e,t,n,r){let i=prompt("Enter new recipe name:",t),a=prompt("Enter new ingredients (comma-separated):",n),l=prompt("Enter new category:",r);if(i&&a)try{await (0,o.updateDoc)((0,o.doc)(o.db,"recipes",e),{name:i,ingredients:a.split(",").map(e=>e.trim()),category:l}),console.log("Recipe updated successfully!"),c()}catch(e){console.error("Error updating recipe:",e)}else alert("Recipe name and ingredients cannot be empty!")}async function d(e){let t={contents:[{parts:[{text:`You are an AI assistant for a Recipe Organizer app. Answer questions about its functionality and provide suggestions. Question: ${e}`}]}]};try{let e=await fetch(`${o.AI_API_URL}?key=${o.AI_API_KEY}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}),n=await e.json();if(!n.candidates||!(n.candidates.length>0))return"<strong>Sorry!</strong> I couldn't answer that. Try a different question!";{let e=n.candidates[0].content.parts[0].text;return e=e.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/\n/g,"<br>")}}catch(e){return console.error("Error fetching AI response:",e),"<strong>Error fetching response.</strong> Please try again."}}document.addEventListener("DOMContentLoaded",()=>{let e=JSON.parse(localStorage.getItem("email"));e?(console.log("User is logged in:",e),i(!0)):i(!1),c()}),document.getElementById("login-btn").addEventListener("click",async()=>{try{let e=await (0,o.signInWithPopup)(o.auth,o.provider);localStorage.setItem("email",JSON.stringify(e.user.email)),console.log("User signed in:",e.user.email),i(!0)}catch(e){console.error("Error during login:",e)}}),document.getElementById("logout-btn").addEventListener("click",()=>{(0,o.signOut)(o.auth).then(()=>{localStorage.removeItem("email"),console.log("User signed out"),i(!1)}).catch(e=>console.error("Error during logout:",e))}),document.getElementById("add-recipe").addEventListener("click",()=>{let e=document.getElementById("recipe-name").value.trim(),t=document.getElementById("recipe-ingredients").value.trim(),n=document.getElementById("recipe-category").value;e&&t?(a(e,t,n),document.getElementById("recipe-name").value="",document.getElementById("recipe-ingredients").value=""):alert("Please enter a recipe name and ingredients.")}),document.getElementById("chat-send").addEventListener("click",async()=>{let e=document.getElementById("chat-input").value.trim();if(!e)return;addMessageToChatbox("You",e),document.getElementById("chat-input").value="Thinking...";let t=await d(e);document.getElementById("chat-input").value="",addMessageToChatbox("AI",t)});var g={};g=new URL("service-worker.b94753ee.js",import.meta.url).toString();const u=new URL(g);"serviceWorker"in navigator&&navigator.serviceWorker.register(u.href,{scope:"/RecipeOrganizer/"}).then(e=>console.log("Service Worker Registered:",u.href)).catch(e=>console.error("Service Worker Error:",e)),document.addEventListener("DOMContentLoaded",c);
//# sourceMappingURL=index.443938a7.js.map
